# Apache configuration for homepage deployment
#
# ⚠️ ВАЖНО: Перед использованием этого файла убедитесь, что:
# 1. Файл с таким именем еще не существует
# 2. Домен 'liquidityscan.io' не используется в других конфигурациях
# 3. Вы используете отдельную директорию /var/www/liquidityscan.io
# 4. После создания файла проверьте конфигурацию: sudo httpd -t
#
# ✅ ГОТОВО: Домен заменен на liquidityscan.io
# Для cPanel: разместите файл в /usr/local/apache/conf/includes/liquidityscan.io.conf
# Или в /etc/httpd/conf.d/liquidityscan.io.conf

<VirtualHost *:80>
    # Ваш домен
    ServerName liquidityscan.io
    ServerAlias www.liquidityscan.io
    
    # Root directory for static files
    DocumentRoot /var/www/liquidityscan.io
    
    # Directory configuration
    <Directory /var/www/liquidityscan.io>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # SPA routing support - redirect all requests to index.html
        RewriteEngine On
        RewriteBase /
        RewriteRule ^index\.html$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.html [L]
    </Directory>
    
    # Logging (cPanel использует /etc/apache2/logs/ или /var/log/apache2/)
    ErrorLog /etc/apache2/logs/liquidityscan.io_error.log
    CustomLog /etc/apache2/logs/liquidityscan.io_access.log combined
    
    # Security headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
    
    # Enable compression
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
    </IfModule>
    
    # Cache static assets
    <IfModule mod_expires.c>
        ExpiresActive On
        ExpiresByType image/jpg "access plus 1 year"
        ExpiresByType image/jpeg "access plus 1 year"
        ExpiresByType image/gif "access plus 1 year"
        ExpiresByType image/png "access plus 1 year"
        ExpiresByType image/svg+xml "access plus 1 year"
        ExpiresByType text/css "access plus 1 year"
        ExpiresByType application/javascript "access plus 1 year"
        ExpiresByType application/x-javascript "access plus 1 year"
        ExpiresByType font/woff "access plus 1 year"
        ExpiresByType font/woff2 "access plus 1 year"
        ExpiresByType application/font-woff "access plus 1 year"
        ExpiresByType application/font-woff2 "access plus 1 year"
    </IfModule>
    
    # Deny access to hidden files
    <FilesMatch "^\.">
        Require all denied
    </FilesMatch>
</VirtualHost>

# HTTPS configuration (uncomment after setting up SSL with Let's Encrypt)
# <VirtualHost *:443>
#     ServerName liquidityscan.io
#     ServerAlias www.liquidityscan.io
#     
#     DocumentRoot /var/www/liquidityscan.io
#     
#     # SSL configuration (update paths after running certbot)
#     SSLEngine on
#     SSLCertificateFile /etc/letsencrypt/live/liquidityscan.io/fullchain.pem
#     SSLCertificateKeyFile /etc/letsencrypt/live/liquidityscan.io/privkey.pem
#     
#     # SSL protocols and ciphers
#     SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
#     SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384
#     SSLHonorCipherOrder off
#     
#     # Directory configuration
#     <Directory /var/www/liquidityscan.io>
#         Options -Indexes +FollowSymLinks
#         AllowOverride All
#         Require all granted
#         
#         # SPA routing support
#         RewriteEngine On
#         RewriteBase /
#         RewriteRule ^index\.html$ - [L]
#         RewriteCond %{REQUEST_FILENAME} !-f
#         RewriteCond %{REQUEST_FILENAME} !-d
#         RewriteRule . /index.html [L]
#     </Directory>
#     
#     # Logging (cPanel использует /etc/apache2/logs/)
#     ErrorLog /etc/apache2/logs/liquidityscan.io_ssl_error.log
#     CustomLog /etc/apache2/logs/liquidityscan.io_ssl_access.log combined
#     
#     # Security headers
#     Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
#     Header always set X-Frame-Options "SAMEORIGIN"
#     Header always set X-Content-Type-Options "nosniff"
#     Header always set X-XSS-Protection "1; mode=block"
#     Header always set Referrer-Policy "strict-origin-when-cross-origin"
#     
#     # Enable compression
#     <IfModule mod_deflate.c>
#         AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
#     </IfModule>
#     
#     # Cache static assets
#     <IfModule mod_expires.c>
#         ExpiresActive On
#         ExpiresByType image/jpg "access plus 1 year"
#         ExpiresByType image/jpeg "access plus 1 year"
#         ExpiresByType image/gif "access plus 1 year"
#         ExpiresByType image/png "access plus 1 year"
#         ExpiresByType image/svg+xml "access plus 1 year"
#         ExpiresByType text/css "access plus 1 year"
#         ExpiresByType application/javascript "access plus 1 year"
#         ExpiresByType application/x-javascript "access plus 1 year"
#         ExpiresByType font/woff "access plus 1 year"
#         ExpiresByType font/woff2 "access plus 1 year"
#         ExpiresByType application/font-woff "access plus 1 year"
#         ExpiresByType application/font-woff2 "access plus 1 year"
#     </IfModule>
#     
#     # Deny access to hidden files
#     <FilesMatch "^\.">
#         Require all denied
#     </FilesMatch>
# </VirtualHost>

# Redirect www to non-www (or vice versa - adjust as needed)
# <VirtualHost *:80>
#     ServerName www.liquidityscan.io
#     Redirect permanent / http://liquidityscan.io/
# </VirtualHost>
